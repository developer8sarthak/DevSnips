<!--
  Toast Notification System
  - Stackable notifications
  - Auto-dismiss with progress bar
  - Different types (success, error, info)
  - Accessible announcements
  - Smooth animations
-->

<div class="toast-container" role="log" aria-live="polite" aria-atomic="true">
  <!-- Toasts will be inserted here dynamically -->
</div>

<div class="demo-buttons">
  <button onclick="showToast('success', 'Success!', 'Operation completed successfully.')">
    Show Success Toast
  </button>
  <button onclick="showToast('error', 'Error!', 'Something went wrong.')">
    Show Error Toast
  </button>
  <button onclick="showToast('info', 'Info', 'This is an informational message.')">
    Show Info Toast
  </button>
</div>

<style>
.toast-container {
  position: fixed;
  top: 1rem;
  right: 1rem;
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
  z-index: 1000;
  pointer-events: none;
}

.toast {
  --toast-bg: white;
  --toast-border: #ddd;
  --toast-progress: #4a90e2;
  
  position: relative;
  min-width: 300px;
  max-width: 400px;
  background: var(--toast-bg);
  border: 1px solid var(--toast-border);
  border-radius: 4px;
  padding: 1rem;
  margin: 0;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
  pointer-events: auto;
  overflow: hidden;
  animation: toastSlideIn 0.3s;
}

.toast.removing {
  animation: toastSlideOut 0.3s forwards;
}

.toast-progress {
  position: absolute;
  bottom: 0;
  left: 0;
  width: 100%;
  height: 3px;
  background: var(--toast-progress);
  transform-origin: left;
  animation: toastProgress 5s linear forwards;
}

.toast-header {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  margin-bottom: 0.5rem;
}

.toast-icon {
  width: 20px;
  height: 20px;
}

.toast-title {
  font-weight: bold;
  margin: 0;
  flex-grow: 1;
}

.toast-close {
  padding: 0.25rem;
  border: none;
  background: none;
  cursor: pointer;
  opacity: 0.5;
  transition: opacity 0.3s;
}

.toast-close:hover {
  opacity: 1;
}

.toast-message {
  margin: 0;
}

/* Toast types */
.toast[data-type="success"] {
  --toast-border: #4caf50;
  border-left: 4px solid var(--toast-border);
}

.toast[data-type="error"] {
  --toast-border: #f44336;
  border-left: 4px solid var(--toast-border);
}

.toast[data-type="info"] {
  --toast-border: #2196f3;
  border-left: 4px solid var(--toast-border);
}

/* Animations */
@keyframes toastSlideIn {
  from {
    transform: translateX(100%);
    opacity: 0;
  }
  to {
    transform: translateX(0);
    opacity: 1;
  }
}

@keyframes toastSlideOut {
  from {
    transform: translateX(0);
    opacity: 1;
  }
  to {
    transform: translateX(100%);
    opacity: 0;
  }
}

@keyframes toastProgress {
  from {
    transform: scaleX(1);
  }
  to {
    transform: scaleX(0);
  }
}

/* Demo buttons */
.demo-buttons {
  display: flex;
  gap: 1rem;
  padding: 1rem;
}

.demo-buttons button {
  padding: 0.5rem 1rem;
  border: 1px solid #ddd;
  border-radius: 4px;
  background: white;
  cursor: pointer;
  transition: all 0.3s;
}

.demo-buttons button:hover {
  background: #f5f5f5;
}
</style>

<script>
class ToastNotification {
  static container = document.querySelector('.toast-container');
  static icons = {
    success: '<svg viewBox="0 0 24 24" width="20" height="20"><path d="M9 16.2L4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4L9 16.2z" fill="currentColor"/></svg>',
    error: '<svg viewBox="0 0 24 24" width="20" height="20"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z" fill="currentColor"/></svg>',
    info: '<svg viewBox="0 0 24 24" width="20" height="20"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z" fill="currentColor"/></svg>'
  };
  
  constructor(type, title, message) {
    this.type = type;
    this.title = title;
    this.message = message;
    this.element = null;
    this.timeout = null;
    
    this.create();
    this.show();
  }
  
  create() {
    this.element = document.createElement('div');
    this.element.className = 'toast';
    this.element.setAttribute('data-type', this.type);
    this.element.setAttribute('role', 'alert');
    
    this.element.innerHTML = `
      <div class="toast-header">
        <span class="toast-icon" aria-hidden="true">
          ${ToastNotification.icons[this.type]}
        </span>
        <h3 class="toast-title">${this.title}</h3>
        <button class="toast-close" aria-label="Close notification">
          ${ToastNotification.icons.error}
        </button>
      </div>
      <p class="toast-message">${this.message}</p>
      <div class="toast-progress"></div>
    `;
    
    this.element.querySelector('.toast-close')
      .addEventListener('click', () => this.close());
  }
  
  show() {
    ToastNotification.container.appendChild(this.element);
    
    // Auto-dismiss after 5 seconds
    this.timeout = setTimeout(() => this.close(), 5000);
    
    // Clear timeout if user hovers over toast
    this.element.addEventListener('mouseenter', () => {
      clearTimeout(this.timeout);
      this.element.querySelector('.toast-progress').style.animationPlayState = 'paused';
    });
    
    this.element.addEventListener('mouseleave', () => {
      this.timeout = setTimeout(() => this.close(), 5000);
      this.element.querySelector('.toast-progress').style.animationPlayState = 'running';
    });
  }
  
  close() {
    clearTimeout(this.timeout);
    this.element.classList.add('removing');
    
    this.element.addEventListener('animationend', () => {
      this.element.remove();
    });
  }
}

function showToast(type, title, message) {
  new ToastNotification(type, title, message);
}
</script>